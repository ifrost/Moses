<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>

    </style>
    <script src="../dist/moses.js"></script>
    <script>

        function start() {
            console.log(moses);

            var div = document.getElementById("back");

            console.log('Creating sampler...');
            var sampler = moses.sampler.DistanceSampler.create(div, 10);

            console.log('Creating recogniser...');
            var recogniser = moses.recogniser.DefaultRecogniser.create();

            console.log('Registering patterns...');
            var mosesPatterns = moses.model.MosesPatterns.create();
            var patterns = [mosesPatterns.V, mosesPatterns.CIRCLE, mosesPatterns.DASH];
            patterns.forEach(function(pattern){
                recogniser.register(pattern);
                console.log('Registering pattern: ' + pattern.name);
            });

            console.log('Attaching logger...');
            recogniser.on('recognised', function(data) {
                if (data.bestMatch.recognised) {
                    console.log('Recognised: ' + data.bestMatch.pattern.name + ' (' + Math.floor(data.bestMatch.value * 100) + '%)');
                }
                else {
                    console.log('Not recognised. Was it ' + data.bestMatch.pattern.name + '? (' + Math.floor(data.bestMatch.value * 100) + '%)');
                }
            });

            console.log('Attaching sampler...');
            recogniser.sampler = sampler;

            console.log('Activating sampler...');
            sampler.activate();

            console.log('Ready!');

        }

    </script>
</head>
<body onload="start()">
    <div id="back" style="background-color: black; width: 400px; height: 400px"></div>
</body>
</html>